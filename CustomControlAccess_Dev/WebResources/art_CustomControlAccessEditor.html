<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CustomControlAccessEditor</title>
    <link rel="stylesheet" type="text/css" href="./art_CustomControlAccessEditorStyle" />
    <script src="./art_CustomControlAccessEditorLibrary"></script>
</head>

<body onload="registerFormContextOnload()">
</body>
<script>
    constructDom();

    function registerFormContextOnload() {
        Object.defineProperty(window, "formContext", {
            set: function (val) {
                window.getFormContext = () => val;
                init();
            }
        })
    }
    function init() {
        constructDom();
    }
    function constructDom() {
        const body = document.body;
        const ruleNodes = getRuleNodes();
        const adder = getAdder();
        body.classList.add("cca_packer");
        for (let rn of ruleNodes) body.appendChild(rn);
        body.appendChild(adder);

        function getRuleNodes() {
            const list = [];
            for (let i = 0; i < 5; i++) {
                const rn = new RuleNode();
                list.push(rn.node);
            }
            return list;
        }
        function getAdder() {
            const node = document.createElement("div");
            node.classList.add("cca_adder");
            return node;
        }
    }
</script>

</html>